<h1>{{ displayTicket.problem }}</h1>
<p>User: {{ displayTicket.author.username }}</p>
@if (displayTicket.completed == false) {
    <p>Not resolved yet</p>
}
@else {
    <p>Resolved by {{ displayTicket.resolver.username }}</p>
    <p>Resolution: {{ displayTicket.resolution }}</p>
}

<button (click)="favoriteTicket()">{{isFavoritedByUser() ? 'Unfollow ticket' : 'Follow ticket'}}</button>


<br />
@if(canUserHelp()){
    <input type="text" [(ngModel)]="displayTicket.resolution" />
    <button (click)="setResolved()" [disabled]="displayTicket.resolution == ''">Resolved</button>
    <br />
    <input type="text" [(ngModel)]="commentForm.message" />
    <button (click)="addComment()">Send Comment</button>
    <br />
}
@else {
    <p>Current User may not help on this ticket</p>
}

@if (comments.length != 0) {
    <ul>
        @for (c of comments; track c.id) {
            <li>{{c.author.username}}: {{ c.message }} | {{ c.date | date:'short' }}</li>
        }
    </ul>
    
}
@else {
    <p>No one has commented yet.</p>
}